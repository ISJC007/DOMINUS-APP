<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dominus - Gesti√≥n de Negocio</title>
    <link rel="stylesheet" href="CSS/Styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

    <div id="splash-screen" class="splash">
        <div class="splash-content">
            <h1 class="logo-anim">DOMINUS</h1>
            <p class="slogan-anim">Domina tu negocio, Domina tu vida</p>
            <div class="loader"></div>
        </div>
    </div>

    <header class="main-header glass">
    <div class="header-top" style="position: relative; text-align: center; padding: 25px 10px;">
        
        <button onclick="Interfaz.toggleAjustes()" class="btn-ajustes-top">‚öôÔ∏è</button>

        <h1 class="titulo-app" style="margin-bottom: 5px;">DOMINUS</h1>
        <p class="slogan">Domina tu negocio, Domina tu vida</p>
        
        <div class="tasa-control" style="margin-top: 20px; display: flex; justify-content: center; align-items: center; gap: 10px;">
            <span style="font-size: 0.9em; opacity: 0.8;">Tasa:</span>
            <input type="number" id="tasa-global" onchange="Conversor.setTasa(this.value)" step="0.1" 
                   style="width: 70px; background: rgba(255,255,255,0.05); border: 1px solid var(--primary); color: white; border-radius: 5px; text-align: center;">
        </div>
    </div>

    <div class="dashboard-cards">
        <div class="card-mini">
            <small>Caja (Neto)</small>
            <b id="total-caja">0 Bs</b>
            <span id="total-usd">$ 0.00</span>
        </div>
        <div class="card-mini">
            <small>Por Cobrar</small>
            <b id="total-fiaos" style="color: #ff9800;">0 Bs</b>
        </div>
        <div class="card-mini">
            <small>Gastos</small>
            <b id="total-gastos" style="color: #ff5252;">0 Bs</b>
        </div>
    </div>
</header>

    <nav class="bottom-nav glass">
        <button type="button" onclick="Interfaz.show('dashboard')">üè† Inicio</button>
        <button type="button" onclick="Interfaz.show('ventas')">üí∞ Ventas</button>
        <button type="button" onclick="Interfaz.show('gastos')">üìâ Gastos</button>
        <button type="button" onclick="Interfaz.show('fiaos-list')">ü§ù Creditos</button>
        <button type="button" onclick="Interfaz.show('inventario')">üì¶ Stock</button>
    </nav>

    <main id="app-content">
        
        <section id="view-dashboard" class="app-section">
            <div class="welcome-card glass">
                <h2>Bienvenido</h2>
                <p>Usa el men√∫ inferior para registrar movimientos.</p>
                <button type="button" class="btn-main" style="margin-top: 20px; background: #2196F3; color: white;" onclick="Controlador.generarCierre()">
                    üìä Generar Cierre del D√≠a
                </button>
            </div>
            <div class="card-grafica">
                <canvas id="graficaVentas"></canvas>
            </div>
        </section>
    
        <section id="view-ventas" class="app-section hidden">
            <div class="search-container glass" style="padding: 10px; margin-bottom: 10px;">
                <label for="busqueda-real-inv" class="hidden-label" style="display:none;">Buscar</label>
                <input type="text" id="busqueda-real-inv" name="busqueda-real-inv" class="glass" placeholder="üîç Buscar para vender..." 
                       style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--primary); color: white; background: rgba(255,255,255,0.05);">
            </div>

            <div class="card glass">
                <h3>Nueva Venta</h3>

                <button type="button" id="btn-modo-punto" class="glass" 
                    onclick="Interfaz.alternarModoPunto()"
                    style="width: 100%; padding: 12px; margin-bottom: 10px; border: 1px dashed var(--primary); color: var(--primary); font-weight: bold; cursor: pointer; border-radius: 8px;">
                    üè¶ ¬øEs Servicio de Punto?
                </button>

                <div id="wrapper-comision" class="hidden">
                    <label for="v-comision">Comisi√≥n %:</label>
                    <input type="number" id="v-comision" name="v-comision" placeholder="Comisi√≥n %" style="margin-bottom: 5px;">
                    <div class="comision-selector" style="display: flex; gap: 5px; margin-bottom: 10px;">
                        <button type="button" class="btn-mini" onclick="document.getElementById('v-comision').value=5">5%</button>
                        <button type="button" class="btn-mini" onclick="document.getElementById('v-comision').value=10">10%</button>
                        <button type="button" class="btn-mini" onclick="document.getElementById('v-comision').value=15">15%</button>
                        <button type="button" class="btn-mini" style="background:#607d8b" onclick="document.getElementById('v-comision').value=0">0%</button>
                    </div>
                </div>

                <label for="v-producto">Producto:</label>
                <input type="text" id="v-producto" name="v-producto" list="sugerencias-ventas" oninput="Interfaz.actualizarSelectorTallas(this.value)" placeholder="Producto (Ej: Pollo)">
                <datalist id="sugerencias-ventas"></datalist>

                <label for="v-cantidad">Cantidad:</label>
                <input type="number" id="v-cantidad" name="v-cantidad" placeholder="Cantidad" value="1" style="margin-bottom: 10px;">

                <div id="contenedor-talla" class="hidden" style="margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <label for="v-talla" style="color: var(--primary); font-size: 0.9em;">Seleccione Talla/Peso:</label>
                        <span id="v-info-stock" style="color: #4caf50; font-weight: bold; font-size: 0.9em;"></span>
                    </div>
                    <select id="v-talla" name="v-talla" class="glass" 
                            style="width: 100%; padding: 10px; border-radius: 8px; background: #222; color: white; border: 1px solid var(--primary);"
                            onchange="Controlador.mostrarStockDisponible(this.value)"> 
                        <option value="">Seleccione Talla...</option>
                    </select>
                </div>

                <div class="input-group">
                    <div style="flex:2">
                        <label for="v-monto">Monto:</label>
                        <input type="number" id="v-monto" name="v-monto" placeholder="Monto">
                    </div>
                    <div style="flex:1">
                        <label for="v-moneda">Moneda:</label>
                        <select id="v-moneda" name="v-moneda">
                            <option value="USD">$ USD</option>
                            <option value="BS">Bs</option>
                        </select>
                    </div>
                </div>
                
                <label for="v-metodo">M√©todo de Pago:</label>
                <select id="v-metodo" name="v-metodo" onchange="Interfaz.toggleClienteField(this.value)">
                    <option value="Efectivo $">Efectivo $</option>
                    <option value="Pago M√≥vil">Pago M√≥vil</option>
                    <option value="Punto de Venta">Punto de Venta</option>
                    <option value="Fiao">Fiao (Deuda)</option>
                    <option value="Biopago">Biopago</option>
                </select>
                
                <div id="wrapper-cliente" class="hidden">
                    <label for="v-cliente">Cliente:</label>
                    <input type="text" id="v-cliente" name="v-cliente" placeholder="Nombre del Cliente">
                </div>

                <button type="button" class="btn-main" onclick="Controlador.ejecutarVenta()">Registrar Venta</button>
            </div>

            <h4>√öltimas Ventas</h4>
            <div id="lista-ventas-historial" class="listado-container"></div>
        </section>

        <section id="view-gastos" class="app-section hidden">
            <div class="card glass">
                <h3>Registrar Gasto</h3>
                <label for="g-desc">Descripci√≥n:</label>
                <input type="text" id="g-desc" name="g-desc" placeholder="¬øEn qu√© gastaste?">
                <div class="input-group">
                    <div style="flex:2">
                        <label for="g-monto">Monto:</label>
                        <input type="number" id="g-monto" name="g-monto" placeholder="Monto">
                    </div>
                    <div style="flex:1">
                        <label for="g-moneda">Moneda:</label>
                        <select id="g-moneda" name="g-moneda">
                            <option value="USD">$ USD</option>
                            <option value="BS">Bs</option>
                        </select>
                    </div>
                </div>
                <button type="button" class="btn-main btn-danger" onclick="Controlador.ejecutarGasto()">Guardar Gasto</button>
            </div>
            <h4>Historial de Gastos</h4>
            <div id="lista-gastos-historial" class="listado-container"></div>
        </section>

        <section id="view-fiaos-list" class="app-section hidden">
            <h3>Cuentas por Cobrar (Bs)</h3>
            <div id="lista-fiaos" class="listado-container"></div>
        </section>

        <section id="view-inventario" class="app-section hidden">
            <div class="card glass">
                <h3>üì¶ Cargar Inventario</h3>
                <label for="inv-nombre">Producto:</label>
                <input type="text" id="inv-nombre" name="inv-nombre" placeholder="Producto">
                
                <div class="input-group">
                    <div style="flex:1">
                        <label for="inv-cant">Cantidad:</label>
                        <input type="number" id="inv-cant" name="inv-cant" placeholder="Cantidad">
                    </div>
                    <div style="flex:1">
                        <label for="inv-precio">Precio Bs:</label>
                        <input type="number" id="inv-precio" name="inv-precio" placeholder="Precio Bs">
                    </div>
                </div>

                <button type="button" class="btn-mini" style="background:#444; margin-bottom:10px; width:100%;" onclick="AbrirGestorTallas()">
                     Desglosar por Tipo
                </button>

                <label for="inv-unidad">Unidad de Medida:</label>
                <select id="inv-unidad" name="inv-unidad" class="glass" style="width: 100%; margin-bottom: 10px; padding: 10px; color: white; background: #222;">
                    <option value="Und">Unidad (Und)</option>
                    <option value="Paca">Paca (Paq)</option>
                    <option value="Kg">Kilogramos (Kg)</option>
                    <option value="Lts">Litros (Lts)</option>
                    <option value="Talla">Talla (Ropa/Calzado)</option>
                </select>

                <button type="button" class="btn-main" onclick="Controlador.guardarEnInventario()">Cargar Producto</button>
            </div>

            <h4 style="margin-top: 20px;">Stock Actual</h4>
            <div id="lista-inventario" class="listado-container"></div>
        </section>


            <div class="ajustes-body">
                <div class="ajuste-item">
                    <span>Modo Oscuro</span>
                    <label class="switch-dominus">
                        <input type="checkbox" id="checkDarkMode" onchange="Controlador.toggleDarkMode(this.checked)">
                        <span class="slider-dominus"></span>
                    </label>
                </div>

                <div class="ajuste-item">
                    <span>Descuento Autom√°tico Stock</span>
                    <label class="switch-dominus">
                        <input type="checkbox" id="check-inv" onchange="Controlador.toggleInv(this.checked)">
                        <span class="slider-dominus"></span>
                    </label>
                </div>

                <div class="ajuste-item">
                    <button type="button" class="btn-mini btn-danger" style="width: 100%;" onclick="DOMINUS.resetTotal()">üóëÔ∏è Borrar Todo (Reset)</button>
                </div>
            </div>
        </div>

    </main>

    <div id="modal-gestor-tallas" class="modal-tallas">
        <div class="modal-content-tallas glass">
            <h3 style="color:var(--primary); margin-bottom:15px;"> Desglose Por Tipo</h3>
            
            <div style="margin-bottom: 15px;">
                <label for="inv-bloque-rango" style="display:block; font-size: 0.8em; color: gray;">Filtrar por rango:</label>
                <select id="inv-bloque-rango" name="inv-bloque-rango" class="glass" 
                        style="width:100%; padding:8px; border:1px solid var(--primary); background:#111; color:white;"
                        onchange="Interfaz.filtrarTallasPorBloque(this.value)">
                    <option value="todos">Mostrar Todas</option>
                    <option value="ninos-peq">Ni√±os (18-25)</option>
                    <option value="ninos-gra">Ni√±os Grandes (26-32)</option>
                    <option value="juvenil">Juvenil/Damas (33-39)</option>
                    <option value="caballero">Caballeros (40-45)</option>
                </select>
            </div>

            <div id="contenedor-filas-tallas">
                </div>
            
            <button type="button" class="btn-main" style="margin-top:15px;" onclick="CerrarGestorTallas()">Confirmar Cantidades</button>
        </div>
    </div>

    <div id="panelAjustes" class="ajustes-sidebar">
    <div class="ajustes-header">
        <span>Configuraci√≥n</span>
        <button onclick="Interfaz.toggleAjustes()">√ó</button>
    </div>
    <div class="ajuste-item">
        </div>
</div>

<script src="JS/Main.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="JS/Offline.js"></script>
    <script src="JS/Conversor.js"></script>
    <script src="JS/Inventario.js"></script>
    <script src="JS/Ventas.js"></script>
    <script src="JS/Main.js"></script>

    <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js');
  }
</script>




</body>
</html>