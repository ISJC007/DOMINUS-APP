<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dominus - Gesti√≥n de Negocio</title>
    <link rel="stylesheet" href="CSS/Styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

    <div id="splash-screen" class="splash">
        <div class="splash-content">
            <h1 class="logo-anim">DOMINUS</h1>
            <p class="slogan-anim">Domina tu negocio, Domina tu vida</p>
            <div class="loader"></div>
        </div>
    </div>

    <header class="main-header glass">
        <div class="header-top">
            <h1 class="titulo-app">DOMINUS</h1>
            <p class="slogan">Domina tu negocio, Domina tu vida</p>
            
            <div class="tasa-control">
                <span>Tasa:</span>
                <input type="number" id="tasa-global" onchange="Conversor.setTasa(this.value)" step="0.1">
            </div>

            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="Controlador.toggleDarkMode()" class="btn-mini btn-nocturno" style="flex: 1;">üåô Modo Nocturno</button>
                <button onclick="Interfaz.toggleAjustes()" class="btn-mini" style="flex: 1; background: #555;">‚öôÔ∏è Ajustes</button>
            </div>
        </div>

        <div class="dashboard-cards">
            <div class="card-mini">
                <small>Caja (Neto)</small>
                <b id="total-caja">0 Bs</b>
                <span id="total-usd">$ 0.00</span>
            </div>
            <div class="card-mini">
                <small>Por Cobrar</small>
                <b id="total-fiaos" style="color: #ff9800;">0 Bs</b>
            </div>
            <div class="card-mini">
                <small>Gastos</small>
                <b id="total-gastos" style="color: #ff5252;">0 Bs</b>
            </div>
        </div>
    </header>

    <nav class="bottom-nav glass">
        <button onclick="Interfaz.show('dashboard')">üè† Inicio</button>
        <button onclick="Interfaz.show('ventas')">üí∞ Ventas</button>
        <button onclick="Interfaz.show('gastos')">üìâ Gastos</button>
        <button onclick="Interfaz.show('fiaos-list')">ü§ù Creditos</button>
        <button onclick="Interfaz.show('inventario')">üì¶ Stock</button>
    </nav>

    <main id="app-content">
        
        <section id="view-dashboard" class="app-section">
            <div class="welcome-card glass">
                <h2>Bienvenido</h2>
                <p>Usa el men√∫ inferior para registrar movimientos.</p>
                <button class="btn-main" style="margin-top: 20px; background: #2196F3; color: white;" onclick="Controlador.generarCierre()">
                    üìä Generar Cierre del D√≠a
                </button>
            </div>
            <div class="card-grafica">
                <canvas id="graficaVentas"></canvas>
            </div>
        </section>
    
        <section id="view-ventas" class="app-section hidden">
            <div class="search-container glass" style="padding: 10px; margin-bottom: 10px;">
                <input type="text" id="busqueda-real-inv" class="glass" placeholder="üîç Buscar para vender..." 
                       style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--primary); color: white; background: rgba(255,255,255,0.05);">
            </div>

            <div class="card glass">
                <h3>Nueva Venta</h3>

                <input type="number" id="v-comision" placeholder="Comisi√≥n %">
                <div class="comision-selector" style="display: flex; gap: 5px; margin-bottom: 10px;">
                    <button type="button" class="btn-mini" onclick="document.getElementById('v-comision').value=5">5%</button>
                    <button type="button" class="btn-mini" onclick="document.getElementById('v-comision').value=10">10%</button>
                    <button type="button" class="btn-mini" onclick="document.getElementById('v-comision').value=15">15%</button>
                    <button type="button" class="btn-mini" style="background:#607d8b" onclick="document.getElementById('v-comision').value=0">0%</button>
                </div>

                <input type="text" id="v-producto" list="sugerencias-ventas" oninput="Interfaz.actualizarSelectorTallas(this.value)" placeholder="Producto (Ej: Pollo)">
                <datalist id="sugerencias-ventas"></datalist>

                <input type="number" id="v-cantidad" placeholder="Cantidad" value="1" style="margin-bottom: 10px;">
               <div id="contenedor-talla" class="hidden" style="margin-bottom: 10px;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
        <label style="color: var(--primary); font-size: 0.9em;">Seleccione Talla/Peso:</label>
        <span id="v-info-stock" style="color: #4caf50; font-weight: bold; font-size: 0.9em;"></span>
    </div>
    
    <select id="v-talla" class="glass" 
            style="width: 100%; padding: 10px; border-radius: 8px; background: #222; color: white; border: 1px solid var(--primary);"
            onchange="Controlador.mostrarStockDisponible(this.value)"> 
        <option value="">Seleccione Talla...</option>
    </select>
</div>
                <div class="input-group">
                    <input type="number" id="v-monto" placeholder="Monto">
                    <select id="v-moneda">
                        <option value="USD">$ USD</option>
                        <option value="BS">Bs</option>
                    </select>
                </div>
                
                <select id="v-metodo" onchange="Interfaz.toggleClienteField(this.value)">
                    <option value="Efectivo $">Efectivo $</option>
                    <option value="Pago M√≥vil">Pago M√≥vil</option>
                    <option value="Punto de Venta">Punto de Venta</option>
                    <option value="Fiao">Fiao (Deuda)</option>
                    <option value="Biopago">Biopago</option>
                </select>
                
                <input type="text" id="v-cliente" class="hidden" placeholder="Nombre del Cliente">
                <button class="btn-main" onclick="Controlador.ejecutarVenta()">Registrar Venta</button>
            </div>

            <h4>√öltimas Ventas</h4>
            <div id="lista-ventas-historial" class="listado-container"></div>
        </section>

        <section id="view-gastos" class="app-section hidden">
            <div class="card glass">
                <h3>Registrar Gasto</h3>
                <input type="text" id="g-desc" placeholder="¬øEn qu√© gastaste?">
                <div class="input-group">
                    <input type="number" id="g-monto" placeholder="Monto">
                    <select id="g-moneda">
                        <option value="USD">$ USD</option>
                        <option value="BS">Bs</option>
                    </select>
                </div>
                <button class="btn-main btn-danger" onclick="Controlador.ejecutarGasto()">Guardar Gasto</button>
            </div>
            <h4>Historial de Gastos</h4>
            <div id="lista-gastos-historial" class="listado-container"></div>
        </section>

        <section id="view-fiaos-list" class="app-section hidden">
            <h3>Cuentas por Cobrar (Bs)</h3>
            <div id="lista-fiaos" class="listado-container"></div>
        </section>

        <section id="view-inventario" class="app-section hidden">
            <div class="card glass">
                <h3>üì¶ Cargar Inventario</h3>
                <input type="text" id="inv-nombre" placeholder="Producto">
                <div class="input-group">
                    <input type="number" id="inv-cant" placeholder="Cantidad">
                    <button type="button" class="btn-mini" style="background:#444; margin-bottom:10px;" onclick="AbrirGestorTallas()">
    üëü Desglosar por Tallas
</button>
                    <input type="number" id="inv-precio" placeholder="Precio Bs">
                </div>

<select id="inv-unidad" class="glass" style="width: 100%; margin-bottom: 10px; padding: 10px; color: white; background: #222;">
    <option value="Und">Unidad (Und)</option>
    <option value="Paca">Paca (Paq)</option>
    <option value="Kg">Kilogramos (Kg)</option>
    <option value="Lts">Litros (Lts)</option>
    <option value="Talla">Talla (Ropa/Calzado)</option>
</select>

                <button class="btn-main" onclick="Controlador.guardarEnInventario()">Cargar Producto</button>
            </div>

            <h4 style="margin-top: 20px;">Stock Actual</h4>
           <div id="lista-inventario" class="listado-container"></div>
        </section>

        <div id="panelAjustes" class="ajustes-sidebar">
            <div class="ajustes-header">
                <h3>Configuraci√≥n</h3>
                <button onclick="Interfaz.toggleAjustes()" class="btn-cerrar">√ó</button>
            </div>

            <div class="ajustes-body">
                <div class="ajuste-item">
                    <span>Modo Oscuro</span>
                    <label class="switch-dominus">
                        <input type="checkbox" id="checkDarkMode" onchange="Controlador.toggleDarkMode(this.checked)">
                        <span class="slider-dominus"></span>
                    </label>
                </div>

                <div class="ajuste-item">
                    <span>Descuento Autom√°tico Stock</span>
                    <label class="switch-dominus">
                        <input type="checkbox" id="check-inv" onchange="Controlador.toggleInv(this.checked)">
                        <span class="slider-dominus"></span>
                    </label>
                </div>

                <div class="ajuste-item">
                    <span>Notificaciones de Gastos</span>
                    <label class="switch-dominus">
                        <input type="checkbox" checked>
                        <span class="slider-dominus"></span>
                    </label>
                </div>
                
                <div class="ajuste-item" style="margin-top: 20px;">
                    <button class="btn-mini btn-danger" style="width: 100%;" onclick="DOMINUS.resetTotal()">üóëÔ∏è Borrar Todo (Reset)</button>
                </div>
            </div>
        </div>

    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="JS/Offline.js"></script>
    <script src="JS/Conversor.js"></script>
    <script src="JS/Inventario.js"></script>
    <script src="JS/Ventas.js"></script>
    <script src="JS/Main.js"></script>

    <div id="modal-gestor-tallas" class="modal-tallas">
    <div class="modal-content-tallas glass">
        <h3 style="color:var(--primary); margin-bottom:15px;">üëü Desglose de Tallas</h3>
        <div id="contenedor-filas-tallas">
            </div>
        <button class="btn-main" style="margin-top:15px;" onclick="CerrarGestorTallas()">Confirmar Cantidades</button>
    </div>
</div>

</body>
</html>